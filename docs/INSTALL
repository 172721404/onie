=======================
ONIE Build Instructions
=======================

Machine Definition Files
========================

In order to compile ONIE for a particular platform you need the
platform's machine definition, located in
$ONIE_ROOT/machine/<platform>.

If you received a machine definition tarball separately you must first
untar it in the $ONIE_ROOT directory.  For example::

  $ cd onie
  $ tar xJf /path/to/tarball/onie-<platform>.tar.xz

See the README file in ``machine/<platform>`` for additional information
about a particular platform.

Cross-Compiling ONIE
====================

Compiling ONIE requires a cross-compiling toolchain.

Compiling ONIE has been qualified using ELDK version 5.3, installed
into /opt/eldk-5.3 on the build host.

The primary Makefile, ``build-config/Makefile``, defaults to using the
ELDK-v5.3 ppce500v2-linux-gnuspe toolchain.  To use a different
toolchain change the following variables in ``build-config/Makefile``::

  ARCH        ?= powerpc
  TARGET      ?= $(ARCH)-linux-gnuspe
  CROSSBIN    ?= /opt/eldk-5.3/powerpc-e500v2/sysroots/i686-eldk-linux/usr/bin/ppce500v2-linux-gnuspe

Change directories to ``build-config`` to compile ONIE.

To compile ONIE first change directories to ``build-config`` and then
type ``"make MACHINE=<platform> all"``, specifying the target machine.
For example::

  $ cd build-config
  $ make -j4 MACHINE=<platform> all

When complete, the ONIE binary is located in
``build/images/<platform>.bin``.

Installing the ONIE binary
==========================

See the INSTALL file in ``machine/<platform>`` for additional information
about how to install the ONIE binary on a particular platform.
