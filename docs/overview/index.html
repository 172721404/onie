
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Overview &mdash; Open Network Install Environment 1.6.4 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.6.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Open Network Install Environment 1.6.4 documentation" href="../index.html" />
    <link rel="next" title="Quick Start Guide – ONIE By Example" href="../user-guide/index.html" />
    <link rel="prev" title="FAQ" href="../faq/index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../user-guide/index.html" title="Quick Start Guide – ONIE By Example"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../faq/index.html" title="FAQ"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Open Network Install Environment 1.6.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview">
<span id="onie-overview"></span><h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="project-overview">
<h2>Project Overview<a class="headerlink" href="#project-overview" title="Permalink to this headline">¶</a></h2>
<p>The Open Network Install Environment (ONIE) is an open source
initiative that defines an open &#8220;install environment&#8221; for bare metal
network switches.  ONIE enables a bare metal network switch ecosystem
where end users have a choice among different network operating
systems.</p>
<p>Traditionally Ethernet switches are procured with pre-installed,
captive operating systems, effectively creating networking appliances
that lock end-users into a vertical supply chain.  While there is
industry wide discussion of a mythical &#8220;white-box&#8221; network switch,
this ecosystem does not exist; failing in part due to the fact that
the hardware cannot accept multiple operating systems.</p>
<p>As a matter of form, these switches have a management subsystem, based
on a variety of CPU architectures that typically include serial
console, out-of-band Ethernet, and sometimes even pluggable mass
storage.  This subsystem can function independently from the switching
ASIC(s) associated with the &#8220;front-panel&#8221; Ethernet interfaces
(i.e. without a full networking OS).</p>
<p>ONIE defines an open source &#8220;install environment&#8221; that runs on this
management subsystem utilizing facilities in a Linux/BusyBox
environment. This environment allows end-users and channel partners to
install the target network OS as part of data center provisioning, in
the fashion that servers are provisioned.</p>
<p>ONIE enables switch hardware suppliers, distributors and resellers to
manage their operations based on a small number of hardware SKUs.
This in turn creates economies of scale in manufacturing,
distribution, stocking, and RMA enabling a thriving ecosystem of both
network hardware and operating system alternatives.</p>
<p><strong>Highlights:</strong></p>
<ul class="simple">
<li>Combines a boot loader with a modern Linux kernel and BusyBox</li>
<li>Provides an environment for installing any network OS</li>
<li>Disruptive, liberating users from a captive, pre-installed network OS</li>
<li>Helps automate large scale data center switch provisioning</li>
<li>Manage your switches like you manage your Linux servers</li>
</ul>
</div>
<div class="section" id="design-overview">
<h2>Design Overview<a class="headerlink" href="#design-overview" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the complete design see the <a class="reference internal" href="../design-spec/index.html#full-design-spec"><em>Design Specification</em></a>.</p>
</div>
<p>ONIE is the combination of a boot loader and a small operating system
for bare metal network switches that provides an environment for
automated provisioning.  ONIE utilizes the CPU complex of the switch,
but not the forwarding data plane as shown in the following figure:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/CPU_Complex.png"><img alt="Typical Network Switch CPU Complex" src="../_images/CPU_Complex.png" style="width: 784.08px; height: 570.24px;" /></a>
<p class="caption">Typical Network Switch CPU Complex - ONIE uses the elements highlighted on the left</p>
</div>
<div class="section" id="initial-system-boot">
<h3>Initial System Boot<a class="headerlink" href="#initial-system-boot" title="Permalink to this headline">¶</a></h3>
<p>When a new machine boots for the first time ONIE locates and executes
a network OS vendorÕs installation program, as shown here:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/First_Boot.png"><img alt="First Time Boot Up" src="../_images/First_Boot.png" style="width: 766.5px; height: 450.5px;" /></a>
<p class="caption">Execution Flow &#8211; First Time Boot Up</p>
</div>
</div>
<div class="section" id="subsequent-system-boots">
<h3>Subsequent System Boots<a class="headerlink" href="#subsequent-system-boots" title="Permalink to this headline">¶</a></h3>
<p>ONIE is <strong>not</strong> used on every boot of the system.  After the initial
installation subsequent boots go straight into the network OS,
bypassing ONIE.  This is depicted here:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/Second_Boot.png"><img alt="Subsequent System Boots" src="../_images/Second_Boot.png" style="width: 705.0px; height: 409.0px;" /></a>
<p class="caption">Subsequent Boots &#8211; After the network OS is installed</p>
</div>
<p>Mechanisms exist for a system to re-enter the installation phase.  An
API is defined so that network operating systems can direct the system
to re-enter the installation phase.</p>
</div>
<div class="section" id="locating-an-installer-image">
<h3>Locating an Installer Image<a class="headerlink" href="#locating-an-installer-image" title="Permalink to this headline">¶</a></h3>
<p>ONIE uses a number of methods to locate a network OS installer,
including, but not limited to:</p>
<ul class="simple">
<li>Statically configured from the boot loader</li>
<li>Locally attached storage, for example a USB memory stick</li>
<li>DHCPv4 / DHCPv6</li>
<li>IPv4 / IPv6 link local neighbors</li>
<li>mDNS / DNS-SD</li>
<li>PXE-like TFTP waterfall</li>
</ul>
<p>The preferred method for image download is HTTP as it offers robust
performance for large image sizes.  TFTP is also supported, but its
use is discouraged in favor of HTTP.</p>
<p>Once an image is located ONIE proceeds to execute the network OS
installer.</p>
<p>The following diagram illustrates an example of the location and
execution steps:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/Discovery.png"><img alt="Image Discovery" src="../_images/Discovery.png" style="width: 546.0px; height: 408.0px;" /></a>
<p class="caption">Image Discovery Methods</p>
</div>
<p>In the previous diagram the &#8220;Less Exact Methods&#8221; box refers to
mechanisms that use probing techniques to locate an image, such as:</p>
<ul class="simple">
<li>IPv4 / IPv6 link local neighbors</li>
<li>PXE-like TFTP waterfall</li>
</ul>
</div>
<div class="section" id="installer-execution-environment">
<h3>Installer Execution Environment<a class="headerlink" href="#installer-execution-environment" title="Permalink to this headline">¶</a></h3>
<p>When executing the installer, ONIE exports a number of environment
variables for the installer to use.  These variables include system
identification information as well as information learned during the
image discovery process.</p>
<p>An example of the information exported to the installer includes:</p>
<ul class="simple">
<li>Installer URL</li>
<li>HW vendor identifier</li>
<li>HW platform identifier</li>
<li>HW serial number</li>
<li>Ethernet management MAC address</li>
<li>IP address (from DHCP)</li>
<li>Hostname (from DHCP)</li>
</ul>
<p>These variables allow an installer to integrate with other process
automation and orchestration, immediately tying together serial
numbers, MAC addresses and network OS versions.</p>
</div>
<div class="section" id="installer-overview">
<h3>Installer Overview<a class="headerlink" href="#installer-overview" title="Permalink to this headline">¶</a></h3>
<p>The installer&#8217;s responsibility is to persistently install the
operating system into the hardware.  In fulfilling that role an ONIE
compliant network OS installer has a lot of flexibility.</p>
<p>Some examples of what an installer could do:</p>
<ul class="simple">
<li>Fetch additional binaries and configuration files via HTTP</li>
<li>Chat with inventory control systems via HTTP</li>
<li>Download a new kernel+initramfs and kexec(8) into it</li>
</ul>
</div>
<div class="section" id="network-operating-system-interface">
<h3>Network Operating System Interface<a class="headerlink" href="#network-operating-system-interface" title="Permalink to this headline">¶</a></h3>
<p>ONIE provides an environment for a network OS to perform system
provisioning and maintenance operations, including:</p>
<ul class="simple">
<li>Reinstalling a different network OS</li>
<li>Uninstalling, i.e. wiping the system clean</li>
<li>Rescue and recovery</li>
<li>Updating ONIE</li>
</ul>
<p>This environment forms an interface between ONIE and the network OS.</p>
</div>
<div class="section" id="updating-onie">
<h3>Updating ONIE<a class="headerlink" href="#updating-onie" title="Permalink to this headline">¶</a></h3>
<p>ONIE provides a mechanism for updating itself.  This mechanism
proceeds much like the network installer discovery and executing
phase, however the image in this case is an ONIE update image.  Once
located, the ONIE update image is downloaded and executed.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/ONIE-logo-green-160x60.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#project-overview">Project Overview</a></li>
<li><a class="reference internal" href="#design-overview">Design Overview</a><ul>
<li><a class="reference internal" href="#initial-system-boot">Initial System Boot</a></li>
<li><a class="reference internal" href="#subsequent-system-boots">Subsequent System Boots</a></li>
<li><a class="reference internal" href="#locating-an-installer-image">Locating an Installer Image</a></li>
<li><a class="reference internal" href="#installer-execution-environment">Installer Execution Environment</a></li>
<li><a class="reference internal" href="#installer-overview">Installer Overview</a></li>
<li><a class="reference internal" href="#network-operating-system-interface">Network Operating System Interface</a></li>
<li><a class="reference internal" href="#updating-onie">Updating ONIE</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../faq/index.html"
                        title="previous chapter">FAQ</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../user-guide/index.html"
                        title="next chapter">Quick Start Guide &#8211; ONIE By Example</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/overview/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../user-guide/index.html" title="Quick Start Guide – ONIE By Example"
             >next</a> |</li>
        <li class="right" >
          <a href="../faq/index.html" title="FAQ"
             >previous</a> |</li>
        <li><a href="../index.html">Open Network Install Environment 1.6.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright .
    </div>
  </body>
</html>